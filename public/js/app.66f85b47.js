(function(e){function t(t){for(var n,o,i=t[0],u=t[1],c=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==s[u]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={app:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0070":function(e,t,r){e.exports=r.p+"img/barcelona.412e3289.jpg"},"0d1b":function(e,t,r){e.exports=r.p+"img/logo-signs-green.e017b6a2.svg"},1:function(e,t){},3448:function(e,t,r){e.exports=r.p+"img/chaing-mai.8ab8b96c.jpg"},"39fb":function(e,t,r){e.exports=r.p+"img/logo1.6207ff7c.svg"},"3adf":function(e,t,r){e.exports=r.p+"img/western-wall.1e3364a3.jpg"},"3c61":function(e,t,r){},4678:function(e,t,r){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="4678"},"4e28":function(e,t,r){e.exports=r.p+"img/Signup.cdc13096.svg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("3c61");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("app-header"),r("router-view"),r("app-footer")],1)},a=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{ref:"header",staticClass:"app-header",class:{scrollClass:e.isScrolling,staticPos:e.isStaticPos}},[n("div",{staticClass:"logo-container"},[n("router-link",{attrs:{to:"/"}},[e.isScrolling?n("img",{attrs:{src:r("39fb"),alt:""}}):n("img",{attrs:{src:r("8c6f"),alt:""}})])],1),n("nav",{ref:"nav"},[n("router-link",{attrs:{to:"/explore"}},[n("button",{class:{scrollClass:e.isScrolling}},[n("span",[e._v(" Explore ")])])]),n("router-link",{attrs:{to:"/edit"}},[n("button",{class:{scrollClass:e.isScrolling}},[n("span",[e._v(" Become a guide ")])])]),e.user?n("img",{staticClass:"user-avatar",attrs:{src:e.user.imgUrl},on:{click:function(t){e.isOpen=!e.isOpen}}}):n("router-link",{attrs:{to:"/login-signup"}},[n("button",{class:{scrollClass:e.isScrolling}},[n("span",[e._v(" Login / Signup ")])])]),n("button",{staticClass:"btn-menu-close",on:{click:function(t){return e.toggleMenu()}}},[n("i",{staticClass:"el-icon-close"})])],1),e.isOpen?n("div",{staticClass:"user-options-container"},[n("p",{staticClass:"option-item"},[e._v("Welcome "+e._s(e.user.fullname))]),n("router-link",{staticClass:"option-item",attrs:{to:"/user-profile/"+e.user._id}},[e._v("My Profile")]),n("p",{staticClass:"option-item logout",on:{click:e.logout}},[e._v("Log out")])],1):e._e(),n("button",{staticClass:"btn-menu",on:{click:function(t){return e.toggleMenu()}}},[e._v("☰")])])},i=[],u=r("1da1"),c=(r("96cf"),r("8055")),l=r.n(c),d="",p=f();function f(){var e=null,t={setup:function(){e||(e=l()(d))},on:function(r,n){e||t.setup(),e.on(r,n)},off:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e||t.setup(),n?e.off(r,n):e.removeAllListeners(r)},emit:function(r,n){e||t.setup(),e.emit(r,n)},terminate:function(){e=null},debounce:function(e){var t,r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];clearTimeout(t),t=setTimeout((function(){e.apply(r,a)}),n)}}};return t}window.socketService=p;var m={data:function(){return{isScrolling:!1,isStaticPos:!1,isOpen:!1}},computed:{user:function(){return this.$store.getters.loggedInUser}},methods:{onScroll:function(){window.scrollY>10?this.isScrolling=!0:this.isScrolling=!1},logout:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"logout"});case 3:e.isOpen=!1,e.$router.push("/"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("Cannot logout",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getLoggedUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"getLoggedUser"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log("Cannot Get Logged User",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},toggleMenu:function(){this.$refs.nav.classList.toggle("menu-open")}},watch:{$route:{immediate:!0,handler:function(e){"/"===e.fullPath?(window.addEventListener("scroll",this.onScroll),this.isScrolling=!1,this.isStaticPos=!1):(window.removeEventListener("scroll",this.onScroll),this.isStaticPos=!0,this.isScrolling=!0)}}},created:function(){var e=this;this.getLoggedUser(),p.setup(),p.emit("user msg","msgs"),p.on("show msg",(function(t){var r=t.title,n=t.message;e.$notify({title:r,message:n,duration:6e3,type:"warning",position:"top-right"})})),console.log(this.user,"this.user"),this.user&&(p.emit("private msg",this.user._id),p.on("show private msg",(function(t){var r=t.title,n=t.message;console.log(n,"Message"),e.$notify({title:r,message:n,duration:6e3,type:"warning",position:"top-right"})})))},destroyed:function(){p.off("user msg","msgs")}},g=m,v=r("2877"),h=Object(v["a"])(g,o,i,!1,null,null,null),b=h.exports,y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},w=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-footer"},[n("img",{attrs:{src:r("ffeb"),alt:""}}),n("p",[e._v("© 2021 Getour, Inc.")])])}],_={},x=_,C=Object(v["a"])(x,y,w,!1,null,null,null),j=C.exports,k={components:{appHeader:b,appFooter:j}},T=k,O=Object(v["a"])(T,s,a,!1,null,null,null),R=O.exports,U=r("9483");Object(U["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var $,E,S=r("8c4f"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"tour-app"},[n("div",{staticClass:"hero-container"},[n("tour-filter"),e._m(0)],1),n("div",{staticClass:"countries-container"},[n("div",{staticClass:"countries-title"},[n("h1",[e._v("Top Rated Destinations")]),n("router-link",{attrs:{to:"/explore"}},[n("el-button",{attrs:{round:""}},[e._v("See All")])],1)],1),n("ul",{staticClass:"countries"},[n("li",[n("router-link",{attrs:{to:"/explore/Thailand"}},[n("div",{staticClass:"category-card"},[n("img",{attrs:{src:r("3448"),alt:""}})]),e._v(" Thailand ")])],1),n("li",[n("router-link",{attrs:{to:"/explore/Israel"}},[n("div",{staticClass:"category-card"},[n("img",{attrs:{src:r("3adf"),alt:""}})]),e._v(" Israel ")])],1),n("li",[n("router-link",{attrs:{to:"/explore/Spain"}},[n("div",{staticClass:"category-card"},[n("img",{attrs:{src:r("0070"),alt:""}})]),e._v(" Spain ")])],1),n("li",[n("router-link",{attrs:{to:"/explore/Netherlands"}},[n("div",{staticClass:"category-card"},[n("img",{attrs:{src:r("58ff"),alt:""}})]),e._v(" Netherlands ")])],1)])]),n("div",{staticClass:"become-guide-container"},[n("div",{staticClass:"title"},[e._m(1),n("router-link",{attrs:{to:"/edit"}},[n("el-button",{staticClass:"become-btn",attrs:{square:""}},[e._v("Become a guide")])],1)],1)]),n("div",{staticClass:"tours-container"},[n("div",{staticClass:"tours-title"},[n("h1",[e._v("Top Rated Tours")]),n("router-link",{attrs:{to:"/explore"}},[n("el-button",{attrs:{round:""}},[e._v("See All")])],1)],1),n("div",{staticClass:"preview-container"},[e.tours?n("ul",{staticClass:"tours"},e._l(e.tours.slice(0,6),(function(e){return n("li",{key:e._id},[n("tour-preview",{attrs:{tour:e}})],1)})),0):e._e()])])])},P=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hero-line"},[r("h1",[e._v("Explore")]),r("h2",[e._v("The best places")]),r("h1",[e._v("With")]),r("h2",{staticClass:"h2-2"},[e._v("The best guides"),r("span",[e._v(".")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[e._v(" A journey of a thousand miles "),r("br"),e._v(" begins with a single step ")])}],D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"tour-filter"},[r("form",[r("el-input",{staticClass:"dest-input",attrs:{placeholder:"Destination",clearable:""},model:{value:e.filterBy.byDestination,callback:function(t){e.$set(e.filterBy,"byDestination",t)},expression:"filterBy.byDestination"}}),r("el-date-picker",{staticClass:"date-input",attrs:{type:"date",placeholder:"Pick a day","value-format":"timestamp"},model:{value:e.filterBy.byDate,callback:function(t){e.$set(e.filterBy,"byDate",t)},expression:"filterBy.byDate"}}),r("div",{staticClass:"price-input",on:{click:function(t){return e.toggleRangeBox()}}},[e._v(e._s(e.priceToShow))]),e.isOpen?r("div",{staticClass:"range-box-modal"},[r("div",{staticClass:"range-box-modal-header"},[r("h4",[e._v("Pick Your Price")]),r("el-slider",{attrs:{range:"",max:2e3},model:{value:e.filterBy.byPriceRange,callback:function(t){e.$set(e.filterBy,"byPriceRange",t)},expression:"filterBy.byPriceRange"}})],1),r("div",{staticClass:"price-box-container"},[r("div",{staticClass:"min-box"},[e._v(" min price "),r("br"),r("span",[e._v(" $ "+e._s(e.filterBy.byPriceRange[0])+" ")])]),e._v(" - "),r("div",{staticClass:"min-box"},[e._v(" max price "),r("br"),r("span",[e._v(" $ "+e._s(e.filterBy.byPriceRange[1])+" ")])]),r("el-button",{staticClass:"price-ok-btn",on:{click:function(t){return e.toggleRangeBox()}}},[e._v("Save")])],1)]):e._e(),r("router-link",{attrs:{to:"/explore"}},[r("el-button",{staticClass:"save-btn",attrs:{icon:"el-icon-search",circle:""},on:{click:function(t){return e.setFilter()}}})],1)],1)])},B=[],A=r("3835"),L=(r("99af"),{data:function(){return{isOpen:!1,priceToShow:"Price",filterBy:{byDestination:"",byDate:"",byPriceRange:[0,2e3]}}},methods:{toggleRangeBox:function(){this.isOpen&&this.setPrice(),this.isOpen=!this.isOpen},setPrice:function(){var e=Object(A["a"])(this.filterBy.byPriceRange,2),t=e[0],r=e[1];this.priceToShow="$".concat(t," - $").concat(r)},setFilter:function(e){var t=JSON.parse(JSON.stringify(this.filterBy));e&&(t.byDestination=e),t.byPriceRange={min:this.filterBy.byPriceRange[0],max:this.filterBy.byPriceRange[1]},this.$store.commit({type:"setFilterBy",filter:t}),this.$emit("setFilter")}},created:function(){this.$route.params.country&&this.setFilter(this.$route.params.country)},destroyed:function(){this.$store.commit({type:"resetFilter"})}}),q=L,N=Object(v["a"])(q,D,B,!1,null,null,null),F=N.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"tour-preview"},[n("router-link",{attrs:{to:"/details/"+e.tour._id}},[n("div",{staticClass:"mini-user-container"},[n("div",{staticClass:"mini-user-img"},[n("img",{attrs:{src:""+e.tour.byUser.imgUrl,alt:""}})]),n("router-link",{staticClass:"link",attrs:{to:"/user-profile/"+e.tour.byUser._id}},[n("p",{staticClass:"mini-user-fullname"},[e._v(e._s(e.tour.byUser.fullname))])])],1),n("div",{staticClass:"preview-img-container"},[e.tour.imgs.length?n("img",{attrs:{src:""+e.tour.imgs[0],alt:""}}):n("img",{attrs:{src:r("bb53"),alt:""}})]),n("div",{staticClass:"tour-description-container"},[n("h3",[e._v(e._s(e.tour.title))]),n("p",[e._v(e._s(e.tour.country))]),n("div",{staticClass:"little-container"},[n("p",[e._v(e._s(e._f("moment")(e.tour.startedAt)))]),e.tour.members<e.tour.capacity?n("p",[e._v(" "+e._s(e.tour.members)+"/"+e._s(e.tour.capacity)+" Joined ")]):n("p",[e._v("Fully Booked")])]),n("div",{staticClass:"price-rate-container"},[n("h3",{staticClass:"price"},[e._v("$"+e._s(e.tour.price))]),n("p",[n("i",{staticClass:"el-icon-star-on"}),e._v(e._s(e.rateToShow)+" "),n("span",{staticClass:"reviews-length"},[e._v("("+e._s(e.tour.reviews.length)+")")])])])])])],1)},z=[],Y=(r("13d5"),r("b680"),r("c1df")),J=r.n(Y),G={props:{tour:{type:Object}},data:function(){return{rate:0}},computed:{rateToShow:function(){if(this.tour.reviews.length){var e=this.tour.reviews.reduce((function(e,t){var r=t.rate;return e+r}),0),t=e/this.tour.reviews.length,r=t.toFixed(1);return r}return 0}},filters:{moment:function(e){return J()(e).format(" DD/MM/YYYY")}},methods:{},created:function(){this.rate=this.tour.rate}},H=G,V=Object(v["a"])(H,M,z,!1,null,null,null),W=V.exports,K={name:"tour-app",data:function(){return{tours:[],country:null}},methods:{loadTours:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"query"});case 2:r=t.sent,e.tours=r;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadTours()},components:{tourFilter:F,tourPreview:W}},Q=K,X=Object(v["a"])(Q,I,P,!1,null,null,null),Z=X.exports,ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"tour-explore"},[r("tour-filter",{on:{setFilter:e.filterChanged}}),e.tours?r("tour-list",{attrs:{tours:e.tours}}):e._e()],1)},te=[],re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"tour-list"},[e.tours?r("ul",e._l(e.tours,(function(e){return r("li",{key:e._id},[r("tour-preview",{attrs:{tour:e}})],1)})),0):e._e()])])},ne=[],se={props:{tours:{type:Array}},components:{tourPreview:W}},ae=se,oe=Object(v["a"])(ae,re,ne,!1,null,null,null),ie=oe.exports,ue={data:function(){return{tours:[]}},methods:{loadTours:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"query"});case 2:r=t.sent,e.tours=r;case 4:case"end":return t.stop()}}),t)})))()},filterChanged:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadTours();case 2:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadTours()},components:{tourList:ie,tourFilter:F}},ce=ue,le=Object(v["a"])(ce,ee,te,!1,null,null,null),de=le.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.tour?r("section",{staticClass:"tour-details"},[r("div",{staticClass:"details-container-primary"},[r("h2",[e._v(e._s(e.tour.title))]),r("div",{staticClass:"header-container"},[r("div",{staticClass:"reviews"},[r("el-rate",{attrs:{"show-score":"","allow-half":"",value:e.totalRateToShow,disabled:"",colors:e.colors,"text-color":"$main-clr"}}),r("span",[e._v("("+e._s(e.tour.reviews.length)+")")])],1),r("p",[e._v("•")]),r("h5",[e._v(e._s(e.tour.daysCount)+" Days In "+e._s(e.tour.country))])]),r("el-carousel",{attrs:{height:"400px",autoplay:!1,trigger:"click"}},e._l(e.tour.imgs,(function(e,t){return r("el-carousel-item",{key:t},[r("img",{attrs:{src:e,alt:""}})])})),1),r("div",{staticClass:"images-container"},[r("div",{staticClass:"first-img"},[r("img",{attrs:{src:e.tour.imgs[0],alt:""}})]),r("div",{staticClass:"img-2"},[r("img",{attrs:{src:e.tour.imgs[1],alt:""}})]),r("div",{staticClass:"img3"},[r("img",{attrs:{src:e.tour.imgs[2],alt:""}})]),r("div",{staticClass:"img4"},[r("img",{attrs:{src:e.tour.imgs[3],alt:""}})]),r("div",{staticClass:"img5"},[r("img",{attrs:{src:e.tour.imgs[4],alt:""}})])])],1),r("div",{staticClass:"order-details-container"},[r("div",{staticClass:"details-container-secondry"},[r("div",{staticClass:"guide-container"},[r("h2",[e._v(" "+e._s(e.tour.byUser.fullname)+" ")]),r("img",{attrs:{src:e.tour.byUser.imgUrl,alt:""}})]),r("h3",[e._v(e._s(e._f("moment")(e.tour.startedAt)))]),e.tour.members===e.tour.capacity||e.tour.members>e.tour.capacity?r("h2",[e._v(" Fully Booked ")]):r("h3",{staticClass:"tour-members"},[e._v(" "+e._s(e.tour.members)+"/"+e._s(e.tour.capacity)+" Travellers In Tour ")]),r("div",{staticClass:"icons-container"},e._l(e.tour.tags,(function(t,n){return r("div",{key:n,staticClass:"display-icons"},[r("i",{class:t.class}),r("h4",[e._v(e._s(t.txt))])])})),0),r("p",{staticClass:"tour-desc"},[e._v(e._s(e.tour.description))]),r("div",{staticClass:"review-list"},[r("tour-review",{attrs:{tour:e.tour}})],1)]),r("div",{staticClass:"tour-order"},[r("div",{staticClass:"form-order-main-details"},[r("h4",[e._v("Price: $"+e._s(e.tour.price))]),r("div",{staticClass:"rate"},[r("i",{staticClass:"el-icon-star-on"}),e._v(" "+e._s(e.totalRateToShow)+" "),r("span",{staticClass:"reviews-length"},[e._v("("+e._s(e.tour.reviews.length)+" Reviews)")])])]),r("el-input-number",{attrs:{min:1,max:e.limitCount},on:{change:e.handleChange},model:{value:e.order.guestsCount,callback:function(t){e.$set(e.order,"guestsCount",t)},expression:"order.guestsCount"}}),r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Any Special Requests?"},model:{value:e.order.requests,callback:function(t){e.$set(e.order,"requests",t)},expression:"order.requests"}}),r("h4",[e._v("Total Price: $"+e._s(e.totalPriceToShow))]),r("button",{ref:"btnOrder",staticClass:"btn-order",attrs:{type:""},on:{click:e.toggleModal}},[e._v(" Order Tour ")])],1)]),r("div",{staticClass:"order-modal"},[r("el-dialog",{attrs:{title:"Your Order",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("h3",{staticClass:"title"},[e._v(" "+e._s(e.tour.title)+" ")]),r("h4",[e._v(e._s(e.tour.country))]),r("h4",{staticClass:"order-date"},[e._v(e._s(e._f("moment")(e.tour.startedAt)))]),e.order.requests?r("p",[e._v("Your Special Requests: "+e._s(e.order.requests))]):e._e(),r("h3",{staticClass:"order-default-msg"},[e._v(" Your Order Has been sent to the tour guide for approval we will let you know as soon as possible ")]),r("hr"),r("h3",[e._v("Total Price: $"+e._s(e.totalPriceToShow))]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm(e.tour)}}},[e._v("Confirm")])],1)])],1),r("tour-map",{attrs:{locs:e.tour.locs}})],1):e._e()},fe=[],me=(r("35b3"),r("a9e3"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"tour-review"},[e.tour.reviews?r("ul",e._l(e.tour.reviews,(function(t){return r("li",{key:t.id},[r("div",{staticClass:"review"},[r("div",{staticClass:"mini-user"},[r("div",{staticClass:"mini-user-img"},[r("img",{attrs:{src:t.byUser.imgUrl,alt:""}})]),r("div",{staticClass:"mini-user-details"},[r("router-link",{attrs:{to:"/user-profile/"+t.byUser._id}},[e._v(" "+e._s(t.byUser.fullname)+" ")]),r("h6",[e._v(e._s(e._f("moment")(t.createdAt)))])],1)]),r("div",{staticClass:"ranks-txt"},[r("p",[e._v(e._s(t.txt))]),r("div",{staticClass:"review-rate"},[r("el-rate",{attrs:{disabled:"",colors:e.colors,"text-color":"green"},model:{value:t.rate,callback:function(r){e.$set(t,"rate",r)},expression:"review.rate"}})],1)])])])})),0):e._e(),r("div",{staticClass:"add-review-container"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.addReview()}}},[r("el-input",{attrs:{type:"textarea",maxlength:"300",autosize:{minRows:2,maxRows:4},placeholder:"We Need Your Opinion"},model:{value:e.reviewToEdit.txt,callback:function(t){e.$set(e.reviewToEdit,"txt",t)},expression:"reviewToEdit.txt"}}),r("div",{staticClass:"block"},[r("div",{staticClass:"rate-block"},[r("span",{staticClass:"rate-txt"},[e._v("Rate this tour: ")]),r("el-rate",{attrs:{"allow-half":""},model:{value:e.reviewToEdit.rate,callback:function(t){e.$set(e.reviewToEdit,"rate",e._n(t))},expression:"reviewToEdit.rate"}})],1),r("button",[e._v("Add Review")])])],1)])])}),ge=[],ve={props:{tour:{type:Object}},data:function(){return{colors:["#42ABA7","#42ABA7","#42ABA7"],reviewToEdit:{txt:"",createdAt:Date.now(),rate:null}}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},methods:{addReview:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,s,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.getters.loggedInUser,n=r._id,s=r.fullname,a=r.imgUrl,e.reviewToEdit.byUser={_id:n,fullname:s,imgUrl:a},t.next=4,e.$store.dispatch({type:"addReview",review:e.reviewToEdit,tourId:e.tour._id});case 4:o={title:"Review added by - ".concat(e.loggedInUser.fullname),message:"".concat(e.loggedInUser.fullname," Just Added a Review On ").concat(e.tour.title)},p.emit("add msg",o),e.reviewToEdit.txt="",e.reviewToEdit.rate=null,e.reviewToEdit.createdAt=Date.now();case 9:case"end":return t.stop()}}),t)})))()}},filters:{moment:function(e){return J()(e).fromNow()}},created:function(){p.setup()}},he=ve,be=Object(v["a"])(he,me,ge,!1,null,null,null),ye=be.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"map-container"},[this.locs?r("div",{staticClass:"details-map-container"},[r("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"400px"},attrs:{center:{lat:e.locs[0].lat,lng:e.locs[0].lng},zoom:10,"map-type-id":"terrain"},on:{click:e.addCheckPoint}},e._l(e.locs,(function(t,n){return r("GmapMarker",{key:n,attrs:{position:t,clickable:!0,draggable:!0},on:{click:function(r){e.center=t}}})})),1)],1):r("div",{staticClass:"create-map-container"},[r("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"200px"},attrs:{center:{lat:31.771959,lng:35.217018},zoom:9,"map-type-id":"terrain"},on:{click:e.addCheckPoint}},e._l(e.checkPoints,(function(t,n){return r("GmapMarker",{key:n,attrs:{position:t,clickable:!0,draggable:!0},on:{click:function(r){e.center=t}}})})),1),r("el-button",{on:{click:e.saveCheckPoints}},[e._v("Save Check Points")]),r("el-button",{on:{click:e.clearChechPoints}},[e._v("Clear")])],1)])},_e=[],xe={props:{locs:{type:Array}},data:function(){return{checkPoints:[]}},methods:{addCheckPoint:function(e){var t={lat:e.latLng.lat(),lng:e.latLng.lng()};this.checkPoints.push(t)},saveCheckPoints:function(){this.$emit("setCheckPoints",this.checkPoints),this.checkPoints=[]},clearChechPoints:function(){this.checkPoints=[],this.$emit("setCheckPoints",this.checkPoints)}}},Ce=xe,je=Object(v["a"])(Ce,we,_e,!1,null,null,null),ke=je.exports,Te={data:function(){return{colors:["#42ABA7","#42ABA7","#42ABA7"],reviews:[],dialogVisible:!1,order:{guestsCount:1,requests:""},limitCount:0}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadTour();case 2:e.setLimitCount(),p.setup(),p.emit("order topic",e.tour.byUser._id),p.emit("review topic",e.tour._id),p.on("review-added",(function(t){e.reviews.push(t)}));case 7:case"end":return t.stop()}}),t)})))()},computed:{tour:function(){return this.$store.getters.tour},totalPriceToShow:function(){return this.tour.price*this.order.guestsCount},totalRateToShow:function(){if(this.reviews.length){var e=this.reviews,t=e.reduce((function(e,t){var r=t.rate;return e+r}),0),r=t/this.reviews.length,n=Math.round(100*(r+Number.EPSILON))/100;return n}return 0},loggedInUser:function(){return this.$store.getters.loggedInUser}},filters:{moment:function(e){return J()(e).format("dddd , DD/MM/YYYY")}},methods:{setLimitCount:function(){var e=this.tour.capacity-this.tour.members;this.limitCount=e},loadTour:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$route.params.tourId,t.next=4,e.$store.dispatch({type:"loadTour",id:r});case 4:e.reviews=e.tour.reviews,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("Cant Show Tour Details");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},handleClose:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.$confirm("Are you sure to close this dialog?"),r.next=4,e();case 4:r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),console.log("Cant Show Tour Details");case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},handleConfirm:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loggedInUser){r.next=3;break}return t.$router.push("/login-signup"),r.abrupt("return");case 3:t.dialogVisible=!1,t.order.totalPrice=e.price*t.order.guestsCount,t.tour.members+=t.order.guestsCount,t.order.tour={_id:e._id,title:e.title,imgs:e.imgs,_guideId:e.byUser._id},t.$store.dispatch({type:"saveTour",tour:e}),t.$store.dispatch({type:"saveOrder",tour:e,order:t.order}),p.emit("orderSent",t.order),n={title:"Order Added by - ".concat(t.loggedInUser.fullname),message:"".concat(t.loggedInUser.fullname," Would Like To Join Your Tour In ").concat(t.tour.title),targetId:t.tour.byUser._id},p.emit("add private msg",n),t.order.guestsCount=1,t.order.requests="";case 14:case"end":return r.stop()}}),r)})))()},handleChange:function(e){console.log(e)},toggleModal:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.tour.members>=e.tour.capacity)){t.next=2;break}return t.abrupt("return");case 2:e.dialogVisible=!0;case 3:case"end":return t.stop()}}),t)})))()}},destroyed:function(){p.off("orderSent",this.order)},watch:{"$route.params.tourId":function(){this.loadTour()}},components:{tourReview:ye,TourMap:ke}},Oe=Te,Re=Object(v["a"])(Oe,pe,fe,!1,null,null,null),Ue=Re.exports,$e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"tour-edit"},[r("div",{staticClass:"form-edit"},[r("h3",[e._v("Plan Your Special Tour")]),e.tourToEdit?r("el-form",{attrs:{action:""}},[r("el-form-item",[r("label",{attrs:{for:"title"}},[e._v("Title")]),r("el-input",{attrs:{id:"title",placeholder:"Title",type:"text"},model:{value:e.tourToEdit.title,callback:function(t){e.$set(e.tourToEdit,"title",t)},expression:"tourToEdit.title"}})],1),r("el-form-item",[r("label",{attrs:{for:"country"}},[e._v("Country")]),r("el-input",{attrs:{id:"country",placeholder:"Country",type:"text"},model:{value:e.tourToEdit.country,callback:function(t){e.$set(e.tourToEdit,"country",t)},expression:"tourToEdit.country"}})],1),r("el-form-item",[r("label",{attrs:{for:"price"}},[e._v("Price")]),r("el-input-number",{staticClass:"input-number",attrs:{id:"price",placeholder:"Price",type:"number"},model:{value:e.tourToEdit.price,callback:function(t){e.$set(e.tourToEdit,"price",e._n(t))},expression:"tourToEdit.price"}})],1),r("el-form-item",[r("label",{attrs:{for:"capacity"}},[e._v("Capacity")]),r("el-input-number",{attrs:{id:"capacity",placeholder:"Capacity",type:"number"},model:{value:e.tourToEdit.capacity,callback:function(t){e.$set(e.tourToEdit,"capacity",e._n(t))},expression:"tourToEdit.capacity"}})],1),r("el-form-item",[r("el-date-picker",{attrs:{type:"date",placeholder:"Pick a day","value-format":"timestamp"},model:{value:e.tourToEdit.startedAt,callback:function(t){e.$set(e.tourToEdit,"startedAt",t)},expression:"tourToEdit.startedAt"}})],1),r("el-form-item",[r("label",{attrs:{for:"daysCount"}},[e._v("Days Count")]),r("el-input-number",{attrs:{id:"daysCount",placeholder:"Days",type:"number"},model:{value:e.tourToEdit.daysCount,callback:function(t){e.$set(e.tourToEdit,"daysCount",e._n(t))},expression:"tourToEdit.daysCount"}})],1),r("el-form-item",[r("label",{attrs:{for:"Difficulty"}},[e._v("Difficulty")]),r("el-input-number",{attrs:{id:"Difficulty",placeholder:"Difficulty",type:"number"},model:{value:e.tourToEdit.difficulty,callback:function(t){e.$set(e.tourToEdit,"difficulty",e._n(t))},expression:"tourToEdit.difficulty"}})],1),r("el-form-item",[r("label",{attrs:{for:"tags"}},[e._v("Tags")]),r("el-select",{attrs:{id:"tags",multiple:"",placeholder:"Select"},model:{value:e.tourToEdit.tags,callback:function(t){e.$set(e.tourToEdit,"tags",t)},expression:"tourToEdit.tags"}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",[r("label",{attrs:{for:"description"}},[e._v("Description")]),r("el-input",{attrs:{id:"description",type:"textarea",maxlength:"600","show-word-limit":"",autosize:{minRows:2,maxRows:6},placeholder:"Description"},model:{value:e.tourToEdit.description,callback:function(t){e.$set(e.tourToEdit,"description",t)},expression:"tourToEdit.description"}})],1),r("el-form-item",[r("upload-image",{on:{save:e.saveImg}}),r("div",{staticClass:"imgs-container"},[e._v(" "+e._s(e.tourToEdit.imgs.length)+" / 5 "),e._l(e.tourToEdit.imgs,(function(e,t){return r("img",{key:t,staticClass:"uploaded-img",attrs:{src:e}})}))],2)],1),r("label",{attrs:{for:"tourMap"}},[e._v(" Enter Tour Checkpoints ")]),r("tour-map",{attrs:{id:"tourMap"},on:{setCheckPoints:e.setCheckPoints}}),e.tourToEdit._id?r("el-button",{on:{click:e.saveTour}},[e._v("Update Tour")]):r("el-button",{on:{click:e.saveTour}},[e._v("Create Tour")])],1):e._e()],1)])},Ee=[],Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"img-upload-container"},[e._v(" Upload images "),e.isLoading?r("div",{staticClass:"loader"}):r("label",[r("i",{staticClass:"fas fa-cloud-upload-alt"},[r("input",{staticClass:"file-input",attrs:{type:"file"},on:{change:e.onUploadImg}})])])])},Ie=[],Pe=r("bc3a"),De=r.n(Pe),Be=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="GeTour",n="yonibar",s="https://api.cloudinary.com/v1_1/".concat(n,"/image/upload"),a=new FormData,a.append("file",t.target.files[0]),a.append("upload_preset",r),e.prev=6,e.next=9,De.a.post(s,a);case 9:return o=e.sent,e.abrupt("return",o.data);case 13:e.prev=13,e.t0=e["catch"](6),console.error("ERROR!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),Ae={name:"UploadImg",data:function(){return{isLoading:!1}},methods:{onUploadImg:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isLoading=!0,r.next=3,Be(e);case 3:n=r.sent,t.$emit("save",n.url),t.isLoading=!1;case 6:case"end":return r.stop()}}),r)})))()}}},Le=Ae,qe=Object(v["a"])(Le,Se,Ie,!1,null,null,null),Ne=qe.exports,Fe={name:"tourEdit",data:function(){return{tourToEdit:null,options:[{label:"Water Trail",value:{txt:"Water Trail",class:"fas fa-water"},id:"t101"},{label:"Hiking Tour",value:{txt:"Hiking Tour",class:"fas fa-hiking"},id:"t102"},{label:"Camping Tour",value:{txt:"Camping",class:"fas fa-campground"},id:"t103"},{label:"For Children",value:{txt:"For Children",class:"fas fa-child"},id:"t104"},{label:"Urbanic",value:{txt:"Urbanic Tour",class:"fas fa-city"},id:"t105"},{label:"Nature",value:{txt:"Nature Tour",class:"fas fa-tree"},id:"t106"},{label:"Food",value:{txt:"Food Included",class:"fas fa-utensils"},id:"t107"}]}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},created:function(){var e=this.$route.params.tourId;this.loadTour(e)},methods:{saveImg:function(e){this.tourToEdit.imgs.push(e)},saveTour:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"saveTour",tour:e.tourToEdit});case 3:r={title:"Tour added by - ".concat(e.loggedInUser.fullname),message:"".concat(e.loggedInUser.fullname," has added a tour at - ").concat(e.tourToEdit.country)},p.emit("add msg",r),e.$router.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("Cannot Save Tour",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},loadTour:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"getTourToEdit",id:e});case 3:n=r.sent,t.tourToEdit=n,console.log("this.tourToEdit",t.tourToEdit),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("Cannot load Tour",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},setCheckPoints:function(e){this.tourToEdit.locs=e}},components:{tourMap:ke,uploadImage:Ne}},Me=Fe,ze=Object(v["a"])(Me,$e,Ee,!1,null,null,null),Ye=ze.exports,Je=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ge=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"about"},[r("h1",[e._v("This is an about page")])])}],He={},Ve=Object(v["a"])(He,Je,Ge,!1,null,null,null),We=Ve.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"login-signup"},[n("img",{staticClass:"logo",attrs:{src:r("0d1b"),alt:""}}),e.isLogin?n("form",{attrs:{name:"login"},on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("img",{staticClass:"auth-logo",attrs:{src:r("98f2"),alt:""}}),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginData.username,expression:"loginData.username"}],attrs:{type:"text",required:"",placeholder:"User Name"},domProps:{value:e.loginData.username},on:{input:function(t){t.target.composing||e.$set(e.loginData,"username",t.target.value)}}})]),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginData.password,expression:"loginData.password"}],attrs:{type:"password",required:"",placeholder:"Password"},domProps:{value:e.loginData.password},on:{input:function(t){t.target.composing||e.$set(e.loginData,"password",t.target.value)}}})]),n("button",{attrs:{round:"",plain:"",type:"success"}},[e._v("Login")]),n("a",{staticClass:"set-form-link",on:{click:e.setForm}},[e._v("Dont You Have an account yet?")])]):n("form",{attrs:{name:"signup",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[n("img",{staticClass:"auth-logo",attrs:{src:r("4e28"),alt:""}}),n("label",{staticClass:"profile-picture-upload"},[n("upload-image",{on:{save:e.setImgUrl}})],1),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.signupData.fullname,expression:"signupData.fullname"}],attrs:{required:"",placeholder:"Full Name"},domProps:{value:e.signupData.fullname},on:{input:function(t){t.target.composing||e.$set(e.signupData,"fullname",t.target.value)}}})]),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.signupData.username,expression:"signupData.username"}],attrs:{type:"text",required:"",placeholder:"User Name"},domProps:{value:e.signupData.username},on:{input:function(t){t.target.composing||e.$set(e.signupData,"username",t.target.value)}}})]),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.signupData.password,expression:"signupData.password"}],attrs:{type:"password",required:"",placeholder:"Password","show-password":""},domProps:{value:e.signupData.password},on:{input:function(t){t.target.composing||e.$set(e.signupData,"password",t.target.value)}}})]),n("button",[e._v("Sign Up")]),n("a",{staticClass:"set-form-link",on:{click:e.setForm}},[e._v("Already Have an account?")])])])},Qe=[],Xe={name:"login-signup",data:function(){return{loginData:{username:"",password:""},signupData:{imgUrl:"",fullname:"",username:"",password:""},isLogin:!0}},computed:{},methods:{setForm:function(){this.isLogin=!this.isLogin},setImgUrl:function(e){this.signupData.imgUrl=e},signup:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.signupData),e.signupData.imgUrl||(e.signupData.imgUrl="https://res.cloudinary.com/yonibar/image/upload/v1616747547/default-profile_gmmqxp.png"),t.next=4,e.$store.dispatch({type:"signup",userData:e.signupData});case 4:e.$router.push("/");case 5:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"login",user:e.loginData});case 2:e.$router.push("/");case 3:case"end":return t.stop()}}),t)})))()}},components:{uploadImage:Ne}},Ze=Xe,et=Object(v["a"])(Ze,Ke,Qe,!1,null,null,null),tt=et.exports,rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"user-profile"},[r("div",{staticClass:"left-container"},[e.user?r("div",{staticClass:"avatar"},[r("img",{attrs:{src:e.user.imgUrl}}),r("span",[e._v(e._s(e.user.fullname))])]):e._e(),r("div",{staticClass:"sticky"},[r("h3",[e._v("Pending / Accepted")]),r("p",{staticClass:"sub-header"},[e._v(" "+e._s(e.orders.length)+" New items • "+e._s(e.responeRate)+"% Response rate ")]),e.orders.length?r("div",{staticClass:"requests-container"},e._l(e.orders,(function(t){return r("div",{key:t._id,staticClass:"request-card"},[r("div",{staticClass:"order-details-container"},[r("img",{attrs:{src:t.buyer.imgUrl}}),r("div",{staticClass:"details"},[r("router-link",{staticClass:"link",attrs:{to:"/user-profile/"+t.buyer._id}},[e._v("By: "+e._s(t.buyer.fullname))]),r("p",[e._v("Status:"+e._s(t.status))]),t.requests?r("p",{staticClass:"request"},[e._v(" Request: "+e._s(t.requests)+" ")]):e._e(),r("div",{staticClass:"mini-details"},[t.guestsCount>1?r("span",[e._v(e._s(t.guestsCount)+" guests • ")]):r("span",[e._v(e._s(t.guestsCount)+" guest • ")]),r("span",[e._v("$"+e._s(t.totalPrice)+" •")]),r("p",[e._v(e._s(t.tour.title))])])],1)]),"pending"===t.status&&t.tour._guideId===e.loggedInUser._id?r("div",{staticClass:"btn-container"},[r("el-button",{staticClass:"btn-confirm",attrs:{plain:""},on:{click:function(r){return e.updateOrderStatus(t,!0)}}},[e._v("Confirm")]),r("el-button",{staticClass:"btn-decline",attrs:{plain:""},on:{click:function(r){return e.updateOrderStatus(t,!1)}}},[e._v("Decline")])],1):e._e(),"confirmed"===t.status?r("div",{staticClass:"confirmed"},[e._v(" Confirmed ")]):e._e(),"declined"===t.status?r("div",{staticClass:"declined"},[e._v(" Declined ")]):e._e(),"pending"===t.status?r("el-badge",{staticClass:"item",attrs:{value:"!"}}):e._e()],1)})),0):e._e()])]),r("div",{staticClass:"right-container"},[r("h2",[e._v("Statistics")]),r("div",{staticClass:"chart-container"},[r("div",{staticClass:"chart-details"},[r("p",[e._v(" Total Profits: "),r("span",[e._v("$"+e._s(e.totalProfits))])])]),e.toursByUser.length&&e.orders.length?r("chart",{staticClass:"chart",attrs:{tours:e.toursByUser,orders:e.orders}}):e._e()],1),r("h2",[e._v("Tours")]),r("div",{staticClass:"user-created-tours"},e._l(e.toursByUser,(function(t){return r("div",{key:t._id},[r("tour-preview",{attrs:{tour:t}}),t.byUser._id===e.loggedInUser._id?r("div",{staticClass:"tour-btn-container"},[r("el-button",{staticClass:"el-icon-edit",attrs:{circle:"",type:"info",plain:""},on:{click:function(r){return e.onEditTour(t._id)}}}),r("el-button",{staticClass:"el-icon-delete",attrs:{circle:"",plain:"",type:"danger"},on:{click:function(r){return e.removeTour(t._id)}}})],1):e._e()],1)})),0)])])},nt=[],st=(r("159b"),r("d81d"),r("1fca")),at={props:{tours:{type:Array},orders:{type:Array}},extends:st["a"],created:function(){},computed:{},data:function(){return{tourTitles:[],tourProfits:[]}},mounted:function(){var e=this;this.tours.forEach((function(t){e.tourTitles.push(t.title);var r=0;e.orders.forEach((function(e){e.tour._id===t._id&&(r+=e.totalPrice)})),e.tourProfits.push(r)})),this.renderChart({labels:this.tourTitles,datasets:[{label:"Price",backgroundColor:["#42ABA7","#00A9F3","#00717E","#D4FADD","#0075BA","#9EB0A2"],data:this.tourProfits}]})}},ot=at,it=Object(v["a"])(ot,$,E,!1,null,null,null),ut=it.exports,ct={name:"user-profile",data:function(){return{user:null,toursByUser:[],orders:[]}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser},totalProfits:function(){var e=0;return this.orders.forEach((function(t){e+=t.totalPrice})),e},responeRate:function(){if(this.orders.length){var e=0;return this.orders.forEach((function(t){"pending"!==t.status&&e++})),Math.ceil(e/this.orders.length*100)}return 0}},methods:{updateOrderStatus:function(e,t){var r=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t?(e.status="confirmed",s={title:"Order Confirmed!",message:"".concat(r.user.fullname," Has Accepted Your Order For ").concat(e.tour.title," Tour"),targetId:e.buyer._id}):(e.status="declined",s={title:"Order Declined!",message:"".concat(r.user.fullname," Has Declined Your Order For ").concat(e.tour.title," Tour"),targetId:e.buyer._id}),p.emit("add private msg",s),n.next=5,r.$store.dispatch({type:"saveOrder",order:e});case 5:r.loadOrdersByGuide(r.loggedInUser._id),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log("Cannot update order",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},removeTour:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"removeTour",id:e});case 3:return r.next=5,t.loadToursByUser(t.user._id);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log("Cannot remove tour",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},onEditTour:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$router.push("/edit/".concat(e));case 1:case"end":return r.stop()}}),r)})))()},loadOrdersOfTour:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,n=e.map((function(e){return e._id})),r.next=4,t.$store.dispatch({type:"loadOrdersByTour",toursIds:n});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),console.log("Cannot load orders",r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},loadUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$route.params.userId;case 3:return r=t.sent,t.next=6,e.$store.dispatch({type:"loadUser",id:r});case 6:return n=t.sent,e.user=n,t.next=10,e.loadToursByUser(e.user._id);case 10:return t.next=12,e.loadOrdersByGuide(e.user._id);case 12:return t.abrupt("return",n);case 15:t.prev=15,t.t0=t["catch"](0),console.log("Cant Show USER");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},loadToursByUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"loadToursByUser",userId:e});case 3:n=r.sent,t.toursByUser=n,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log("Cant Show Tours By User");case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},loadOrdersByGuide:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"loadOrdersByGuide",guideId:e});case 3:n=r.sent,t.orders=n,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log("Cant show orders by user");case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadUser();case 2:e.user=t.sent,p.setup(),p.emit("order topic",e.user._id),p.on("addOrder",(function(t){e.orders.push(t),e.user=e.loadUser()}));case 6:case"end":return t.stop()}}),t)})))()},destroyed:function(){p.off("order topic"),p.off("addOrder")},watch:{"$route.params.userId":function(){this.loadUser()}},components:{tourPreview:W,chart:ut}},lt=ct,dt=Object(v["a"])(lt,rt,nt,!1,null,null,null),pt=dt.exports;n["default"].use(S["a"]);var ft=[{path:"/",name:"tour-app",component:Z},{path:"/explore",name:"tour-explore",component:de},{path:"/explore/:country",name:"tour-explore",component:de},{path:"/login-signup",name:"login-signup",component:tt},{path:"/edit/:tourId?",name:"tour-edit",component:Ye},{path:"/about",name:"about",component:We},{path:"/details/:tourId",name:"tour-details",component:Ue},{path:"/user-profile/:userId",name:"tour-profile",component:pt}],mt=new S["a"]({mode:"hash",base:"/",routes:ft}),gt=mt,vt=r("2f62"),ht=(r("4de4"),r("c740"),r("a434"),r("caad"),r("2532"),"/api/"),bt=De.a.create({withCredentials:!0}),yt={get:function(e,t){return wt(e,"GET",t)},post:function(e,t){return wt(e,"POST",t)},put:function(e,t){return wt(e,"PUT",t)},delete:function(e,t){return wt(e,"DELETE",t)}};function wt(e){return _t.apply(this,arguments)}function _t(){return _t=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"get",n=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,bt({url:"".concat(ht).concat(t),method:r,data:n});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e["catch"](2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),_t.apply(this,arguments)}var xt="tour/",Ct={query:jt,getById:Ut,remove:$t,save:Et,getEmptyTour:St,queryAllByType:Tt,loadToursByUser:Ot};function jt(){return kt.apply(this,arguments)}function kt(){return kt=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,yt.get(xt);case 3:return r=e.sent,n=JSON.parse(JSON.stringify(r)),n=n.filter((function(e){return e.price>t.byPriceRange.min&&e.price<t.byPriceRange.max})),t.byDestination&&(n=n.filter((function(e){return e.country.toLowerCase().includes(t.byDestination.toLowerCase())||e.title.toLowerCase().includes(t.byDestination.toLowerCase())}))),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}function Tt(e){if(!e)return yt.get(xt)}function Ot(e){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yt.get(xt);case 2:return r=e.sent,n=r.filter((function(e){return e.byUser._id===t})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),Rt.apply(this,arguments)}function Ut(e){return yt.get(xt+e)}function $t(e){return yt.delete(xt+e)}function Et(e){return e._id?yt.put(xt+e._id,e):yt.post(xt,e)}function St(){return{title:"",country:"",startedAt:"",price:0,rate:0,capacity:0,members:0,daysCount:0,difficulty:0,locs:[],imgs:[],tags:[],description:"",byUser:{},reviews:[]}}function It(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function Pt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var Dt={makeId:It,getRandomInt:Pt},Bt={state:{tours:[],tour:null,filterBy:{byDestination:"",byDate:"",byPriceRange:{min:0,max:2e3}}},getters:{tours:function(e){return e.tours},tour:function(e){return e.tour},filterBy:function(e){return e.filterBy}},mutations:{setTours:function(e,t){var r=t.tours;e.tours=r},setTour:function(e,t){var r=t.tour;e.tour=r},setFilterBy:function(e,t){var r=t.filter;e.filterBy=r},resetFilter:function(e){e.filterBy={byDestination:"",byDate:"",byPriceRange:{min:0,max:2e3}}},updateTour:function(e,t){var r=t.tourAfterSave,n=e.tours.findIndex((function(e){return e._id===r._id}));e.tours.splice(n,1,r)},addTour:function(e,t){var r=t.tour;e.tours.push(r)},remove:function(e,t){var r=t.id,n=e.tours.findIndex((function(e){return e._id===r}));e.tours.splice(n,1)},setChatHistory:function(e,t){var r=t.chat;e.chatHistory=r}},actions:{loadChat:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.tourId,r.next=3,Ct.getById(n);case 3:s=r.sent,e.commit({type:"setChatHistory",chat:s.chatHistory});case 5:case"end":return r.stop()}}),r)})))()},saveMsg:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.data,r.next=3,Ct.getById(n.tourId);case 3:return s=r.sent,s.chatHistory=n.msgs,r.next=7,Ct.save(s);case 7:a=r.sent,e.commit({type:"updateTour",tourAfterSave:a});case 9:case"end":return r.stop()}}),r)})))()},query:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ct.query(e.state.filterBy);case 3:return r=t.sent,e.commit({type:"setTours",tours:r}),t.abrupt("return",r);case 8:t.prev=8,t.t0=t["catch"](0),console.log("Cannot get Tours",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getTourToEdit:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n,s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.id,e.prev=1,r){e.next=8;break}return n=Ct.getEmptyTour(),s=JSON.parse(JSON.stringify(n)),e.abrupt("return",s);case 8:return e.next=10,Ct.getById(r);case 10:return a=e.sent,o=JSON.parse(JSON.stringify(a)),e.abrupt("return",o);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),console.log("Cannot get tour",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))()},saveTour:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.tour,console.log("tour:",s),r.prev=3,a=s._id?"updateTour":"addTour",r.next=7,Ct.save(s);case 7:return o=r.sent,n({type:a,tourAfterSave:o}),r.abrupt("return",o);case 12:r.prev=12,r.t0=r["catch"](3),console.log("cannot save tour",r.t0);case 15:case"end":return r.stop()}}),r,null,[[3,12]])})))()},removeTour:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.id,r.prev=2,r.next=5,Ct.remove(s);case 5:n({type:"remove",id:s}),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](2),console.log("cannot remove tour",r.t0);case 11:case"end":return r.stop()}}),r,null,[[2,8]])})))()},loadTour:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.id,r.prev=2,r.next=5,Ct.getById(s);case 5:return a=r.sent,n({type:"setTour",tour:a}),r.abrupt("return",a);case 10:r.prev=10,r.t0=r["catch"](2),console.log("Cannot get Tours",r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},loadToursByUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.userId,e.prev=1,e.next=4,Ct.loadToursByUser(r);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e["catch"](1),console.log("Cannot get Tours By User",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},addReview:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.review,a=t.tourId,r.prev=2,s.id=Dt.makeId(),r.next=6,Ct.getById(a);case 6:return o=r.sent,o.reviews.push(s),r.next=10,Ct.save(o);case 10:i=r.sent,n({type:"setTour",tour:i}),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](2),console.log("Cannot add review",r.t0);case 17:case"end":return r.stop()}}),r,null,[[2,14]])})))()}}},At="order/",Lt={query:Ft,getById:Mt,remove:zt,save:Yt,getOrdersByGuide:qt};function qt(e){return Nt.apply(this,arguments)}function Nt(){return Nt=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yt.get(At);case 2:return r=e.sent,n=r.filter((function(e){return e.tour._guideId===t})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),Nt.apply(this,arguments)}function Ft(){return yt.get(At)}function Mt(e){return yt.get(At+e)}function zt(e){return yt.delete(At+e)}function Yt(e){try{if(e._id)return yt.put(At,e);if(e.createdAt=Date.now(),e.status="pending",console.log(sessionStorage.getItem("login")),sessionStorage.getItem("login")){var t=JSON.parse(sessionStorage.getItem("login")),r=t._id,n=t.fullname,s=t.imgUrl;e.buyer={_id:r,fullname:n,imgUrl:s}}return yt.post(At,e)}catch(a){console.log("Cannot save order",a)}}var Jt={state:{orders:[],order:null},getters:{orders:function(e){return e.orders},order:function(e){return e.order}},mutations:{query:function(e,t){var r=t.orders;e.orders=r},setOrder:function(e,t){var r=t.order;e.order=r},updateOrder:function(e,t){var r=t.orderAfterSave,n=e.orders.findIndex((function(e){return e._id===r._id}));e.orders.splice(n,1,r)},addOrder:function(e,t){var r=t.order;e.orders.push(r)},remove:function(e,t){var r=t.id,n=e.orders.findIndex((function(e){return e._id===r}));e.orders.splice(n,1)}},actions:{loadOrdersByGuide:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.guideId,e.prev=1,e.next=4,Lt.getOrdersByGuide(r);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e["catch"](1),console.log("Cannot get orders",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},loadOrdersByTour:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.toursIds,e.prev=1,e.next=4,Lt.query(r);case 4:n=e.sent,console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0,"FAILED");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},saveOrder:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.order,a=s._id?"updateOrder":"addOrder",r.next=5,Lt.save(s);case 5:return o=r.sent,console.log(o,"Order"),n({type:a,orderAfterSave:o}),r.abrupt("return",o);case 9:case"end":return r.stop()}}),r)})))()},removeOrder:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.id,r.next=4,Lt.remove(s);case 4:n({type:"remove",id:s});case 5:case"end":return r.stop()}}),r)})))()},loadOrder:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.id,r.prev=2,r.next=5,Lt.getById(s);case 5:return a=r.sent,n({type:"setOrder",order:a}),r.abrupt("return",a);case 10:r.prev=10,r.t0=r["catch"](2),console.log("Cannot get Orders",r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()}},modules:{}},Gt="user/",Ht="auth/",Vt={login:Wt,logout:Xt,signup:Zt,getById:er,getLoggedUser:Qt};function Wt(e){return Kt.apply(this,arguments)}function Kt(){return Kt=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yt.post(Ht+"login",t);case 2:return r=e.sent,sessionStorage.setItem("login",JSON.stringify(r)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),Kt.apply(this,arguments)}function Qt(){var e=JSON.parse(sessionStorage.getItem("login"));return e}function Xt(){return sessionStorage.clear(),yt.post(Ht+"logout")}function Zt(e){return e.createdAt=Date.now(),sessionStorage.setItem("signup",JSON.stringify(e)),yt.post(Ht+"signup",e)}function er(e){return yt.get(Gt+e)}var tr={state:{users:[],user:null,loggedInUser:Vt.getLoggedUser()},getters:{users:function(e){return e.users},user:function(e){return e.user},loggedInUser:function(e){return e.loggedInUser}},mutations:{setUser:function(e,t){var r=t.user;e.user=r},logout:function(e){e.loggedInUser=null},updateUser:function(e,t){var r=t.userAfterSave,n=e.users.findIndex((function(e){return e._id===r._id}));e.users.splice(n,1,r)},signup:function(e,t){var r=t.signedUser;e.users.push(r)},login:function(e,t){var r=t.loggedUser;e.loggedInUser=r},remove:function(e,t){var r=t.id,n=e.users.findIndex((function(e){return e._id===r}));e.users.splice(n,1)}},actions:{logout:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,Vt.logout();case 3:r({type:"logout"});case 4:case"end":return t.stop()}}),t)})))()},login:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.user,r.next=4,Vt.login(s);case 4:return a=r.sent,n({type:"login",loggedUser:a}),r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))()},signup:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.userData,r.next=4,Vt.signup(s);case 4:return a=r.sent,n({type:"signup",signedUser:a}),r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))()},getLoggedUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,Vt.getLoggedUser();case 3:n=t.sent,r({type:"login",loggedUser:n});case 5:case"end":return t.stop()}}),t)})))()},loadUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.id,r.prev=2,r.next=5,Vt.getById(s);case 5:return a=r.sent,n({type:"setUser",user:a}),r.abrupt("return",a);case 10:r.prev=10,r.t0=r["catch"](2),console.log("Cannot get Users",r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}};n["default"].use(vt["a"]);var rr=new vt["a"].Store({state:{},mutations:{},actions:{},modules:{tourStore:Bt,orderStore:Jt,userStore:tr}}),nr=r("5c96"),sr=r.n(nr),ar=(r("0fae"),r("b2d6")),or=r.n(ar),ir=r("755e");n["default"].use(ir,{load:{key:"AIzaSyA2qHxHwbvK29L2wBnhw0TVRF4afPuJLGs",libraries:"places"}}),n["default"].config.productionTip=!1,n["default"].use(sr.a,{locale:or.a}),new n["default"]({router:gt,store:rr,render:function(e){return e(R)}}).$mount("#app")},"58ff":function(e,t,r){e.exports=r.p+"img/amsterdam2.ae795cc4.jpg"},"8c6f":function(e,t,r){e.exports=r.p+"img/logo-w.08fe931e.svg"},"98f2":function(e,t,r){e.exports=r.p+"img/Login.97daeac8.svg"},bb53:function(e,t,r){e.exports=r.p+"img/default-thumbnail.c5a00375.jpeg"},ffeb:function(e,t,r){e.exports=r.p+"img/logo-g.33cb5ac6.svg"}});
//# sourceMappingURL=app.66f85b47.js.map